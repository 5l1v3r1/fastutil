<project name="fastutil" default="jar" basedir=".">

  <property name="version"  value="5.0"/>
  <property name="src"      value="java"/>
  <property name="build"    value="build"/>
  <property name="docs"     value="docs"/>
  <property name="source"   value="5"/>
  <property name="j2se.apiurl" value="http://java.sun.com/j2se/5.0/docs/api/"/>

  <target name="init">
    <mkdir dir="${build}"/>
  </target>

  <target name="compile" depends="init">
    <javac srcdir="${src}" 
	   debug="on"
		deprecation="on"
	   optimize="on"
           destdir="${build}"
	   source="${source}"
	   memoryInitialSize="512M"
	   memoryMaximumSize="512M"
	   fork="yes"
	   >
      <!-- <compilerarg value="-Xlint:all"/> -->
    </javac>
  </target>

  <target name="jar" depends="compile">
    <jar jarfile="fastutil-${version}.jar" 
         basedir="${build}"
	 />
  </target>

  <target name="javadoc">
    <mkdir dir="${docs}"/>
    <javadoc destdir="${docs}" 
			 packagenames = "it.unimi.dsi.fastutil,it.unimi.dsi.fastutil.*"
			 overview="${src}/overview.html"
			 sourcepath="${src}" 
			 public="on"
			 source="${source}"
			 windowtitle="fastutil ${version}"
			 additionalparam="-breakiterator"
			 maxmemory="384M"
			 >
	<link href="${j2se.apiurl}"/>
    </javadoc>
  </target>

  <target name="clean">
    <delete dir="${build}"/>
    <delete>
      <fileset dir="." includes="fastutil-*.jar"/>
    </delete>
  </target>
</project>
